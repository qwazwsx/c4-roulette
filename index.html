<!--made by /u/thisisatesttoseehowl-->

<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.green-pink.min.css" />
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed"></script>
<script src="https://cdn.rawgit.com/claviska/7240757/raw/ec96fc2fd5faf0b3bb849fddc3df29c70d62e00b/jquery.offscreen.js"></script>
<style>
body {
  background: radial-gradient(#222922, #000500);
  }
  p {
  color: #47B247;
  }
  a {text-decoration: none;}
footer {
    bottom: 0;
    left: 0;
    position: fixed;
    right: 0;
    text-align: center;
}
div {
width: 70%;
}
</style>
</head>
<body>
<center>
<img src="http://146.7.140.249/mjpg/video.mjpg?COUNTER" id='cam'>
<div><input id="slider" class="mdl-slider mdl-js-slider" type="range" min="10" max="60" value="15"></div>
<p style="font-family: 'Roboto', sans-serif; "id="value"></p>
<p id="previous">log:<br></p>
<p class="footer">made by /u/thisisatesttoseehowl, thanks to <a href="https://github.com/turbo/c4">turbo/c4 for the cams list</a>. this is licenced under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Attribution-NonCommercial-ShareAlike 4.0 International</a></p>
</center>
 
 <script>
jQuery.ajaxSetup({async:false});
var list;
var url = "http://146.7.140.249/mjpg/video.mjpg?COUNTER"
var previousnum = 0;

//gets cam list
$.ajax({url:'https://gist.githubusercontent.com/turbo/189cde3a5a2847f5be73eab712dd4024/raw/44807377748236e514e4c9b2901489a1b1b2f5c4/c4.txt',success:function(data) {list = data;}});

//if the image doesnt load, load another one
document.getElementById('cam').onerror=start

//initial setup
function start(){
console.log('asdasd')
url = list.split("\n")[Math.floor(Math.random() * list.split("\n").length) + 0]
previousnum++;
document.getElementById('previous').innerHTML += '<a target="_blank" style="font-family: \'Roboto Condensed\', sans-serif;" href="' + url + '">' + previousnum + '</a>,'
}

//shows a new video every <slider> seconds
setInterval(function(){
url = list.split("\n")[Math.floor(Math.random() * list.split("\n").length) + 0]
previousnum++;
document.getElementById('previous').innerHTML += '<a target="_blank" style="font-family: \'Roboto Condensed\', sans-serif;" href="' + url + '">' + previousnum + '</a>,'
},document.getElementById('slider').value * 1000)

//refreshes page and fixes resolution
setInterval(function(){
while ($('#cam').is(':off-right') == false){document.getElementById('cam').width = document.getElementById('cam').width + 1}
while ($('#cam').is(':off-right') == true){document.getElementById('cam').width = document.getElementById('cam').width - 1}
document.getElementById('cam').src = url + '#' + Math.random()
},300)

//shows fps display
setInterval(function(){
document.getElementById('value').innerHTML = 'switch cams every ' + document.getElementById('slider').value + ' seconds'
},100)

 </script>
</body>
</html>
